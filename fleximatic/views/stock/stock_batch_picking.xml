<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="inherit_stock_picking_batch_form_flexi" model="ir.ui.view">
                <field name="name">sale.order.inherit.form.flexi</field>
                <field name="model">stock.picking.batch</field>
                <field name="inherit_id" ref="stock_picking_batch.stock_picking_batch_form"/>
                <field name="arch" type="xml">
                    
                     <xpath expr="//sheet//field[@name='picking_ids']" position="attributes">
                        
                        <attribute name="attrs">
                         {'readonly': ['|',('state', 'in', ('sale','done', 'cancel')),('is_promotional', '=', True) ], 'required': [('display_type', '=', False)],}
                        </attribute>
                        
                        <attribute name="domain">
                         [('x_logistics', '=', False)]
                        </attribute>
                        
                         <attribute name="options">
                            {'no_open':True,'no_create':1}
                        </attribute>
                    </xpath>
                    <xpath expr="//tree//button[@name='action_assign']" position="before">
                       <field name="x_freight_cost" invisible="1"/>
                    </xpath>
                    <xpath expr="//field[@name='x_purchase']" position="after">
                       <field name="total_sales" />
                         <field name="x_freight_cost" />
                      <field name="x_freight" />
                        <field name="x_approve_freight" 
                        
                        attrs="{ 'invisible': ['|',['x_freight','&lt;=',0.06],['x_freight','&gt;=',0.1]], 
                                 'required': ['&amp;',['x_freight','&gt;',0.06],['x_purchase','!=',False]]}" />
                       
                    </xpath>
                    <xpath expr="//field[@name='x_purchase']" position="attributes">
                        <attribute name="domain">
                            [('is_freight', '=', True)]
                        </attribute>
                        <attribute name="context">
                            {'default_is_freight':True}
                        </attribute>
                        
                    </xpath>
                    <xpath expr="//button[@name='confirm_picking']" position="attributes">
                        <attribute name="attrs">
                        { 'invisible': [
                        
                                        '|',['state','not in',['draft'] ,
                                        '&amp;', ['x_approve_freight','!=','aprobado'],
                                        '&amp;', ['x_purchase','!=',False],
                                        '|',     ['x_freight','&lt;=',0.06],
                                                 ['x_freight','&gt;=',0.1]                          
                                        ]

                                   

                        }
                        </attribute>
                      
                    </xpath>
                    
                    
                </field>
        </record>
                     
    </data>
</odoo>